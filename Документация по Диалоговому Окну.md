
>[!error] Обозначения
>"<Кнопка> " - Название, кнопки, которую надо нажать.


>[!warn] Программа
>Для создания диалогов, я использую программу Inky
>
>[Офф. сайт](https://www.inklestudios.com/ink/)

## Создание диалога
Для начала создаем файл с диалогом.
![[Pasted image 20240202221830.png]]

Далее прописываем сам диалог
![[Pasted image 20240202221855.png]]
### Синтаксис программы
	"*" - Выбор для пользователя, без отображения в диалоге
		Оформление:
			"* [выбор] ответ" - То, что в квадратных скобках, не будет отображено в диалоге, а сам ответ, выводится после нажатия на кнопку выбора.
	"+" - Выбор для пользователя, с отображением в диалоге
		Оформление:
			"+ выбор <Enter> ответ" - сначала пишем текст, для кнопки выбора, а затем текст, после выбора.

>[!tip] Tags
>В диалоге можно использовать теги, они обозначаются "#"
>В данном примере, я реализовал три вида тегов:
>	1. speaker - Указывает имя говрящего
>	2. cooldown - Задержка, на появление букв
>	3. method - Какой-либо метод, написанный внутри кода

# Добавление диалога в игру
Импортируем новый диалог в юнити, создаем новый объект и вешаем на него скрипт NPCTrigger. А потом передаем наш диалог.


# Скрипты и Папки
1. DialogueManagement:
	- DialogueChoice - Скрипт для обработки кнопок выбора
	- DialogueController - Контроллер развития диалогов
	- DialogueTag - Обработка тегов внутри диалога
	- DialogueWindow - Главный скрипт управления диалогами (Вешается на менеджер диалога)
2. DialogueTags:
	1. Interfaces:
		- ITag - Интерфейс для создания тегов
	2. TagEntities:
		- CooldownTag - Обработка тега задержки появления букв
		- MethodTag - Обработка тега вызова метода в диалоге
		- SpeakerTag - Обработка тега с говорящим
	- DialogueMethods - Методы, которые можно использовать внутри диалога
	- Tags - Инициализация созданных тегов
3. DialogueTriggers
	- NPCTringger - Триггер запуска диалога (вешается на NPC)
4. Settings
	- OpacityController - Контроллер изменения прозрачности главного окна диалога
	- SettingsController - Обработчик всех оставшихся функций окна настроек

# Создание менеджера
В Choices закидываем все наши кнопки, которые будут служить выбором пользователя
![[Pasted image 20240204140609.png]]


Вот так выглядит сцена 
На окне всех 3-х окнах есть аниматоры, на плавное появление, у всех аниматоров триггером является булиевое значение "isStart"
![[Pasted image 20240204140746.png]]

У окон диалога и чойсов аниматоры настройки аниматоров одинаковы
![[Pasted image 20240204140950.png]]![[Pasted image 20240204140952.png]]

А у окна настроек, добавляется еще одно булиевое значение "isError"и соответственно анимация открытия окна ошибок.
![[Pasted image 20240204141037.png]]